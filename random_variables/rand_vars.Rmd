---
title: "Random Variables"
author: "Raúl López"
date: "`r Sys.Date()`"
output: html_document
---

# Introduction

- Random variables are numeric outcomes resulting from random processes.

- Statistical inference offers a framework for quantifying uncertainty due to randomness.


```{r}
set.seed(1)
# define random variable x to be 1 if blue, 0 otherwise
beads <- rep(c("red", "blue"), times = c(2, 3))
x <- ifelse(sample(beads, 1) == "blue", 1, 0)
print(x)
```


# Sampling Models

- A sampling model models the random behavior of a process as the sampling of draws from an urn.

- The probability distribution of a random variable is the probability of the observed value falling in any given interval.

- We can define a CDF F(a)=Pr(S<=a) to answer questions related to the probability of S being in any interval.

- The average of many draws of a random variable is called its expected value.

- The standard deviation of many draws of a random variable is called its standard error.

We use sampling model to run a Monte Carlo simulation and use the results to estimate the probability of an event. In this example, we have a casino with 1000 players of roulette each day. We have 38 pockets (18 red, 18 black and 2 green). The player bet 1\$ and the events are:

- red: the casino losses 1\$
- black and green: the casino wins 1\$

The model of this random variable is:


```{r}
red <- 18
black <- 18
green <- 2
n <- 1000

S <- sample(c(1,-1), # options are +1 and -1
       n, # players are 1000
       replace = TRUE,
       prob = c(20/38, # probability of win
                18/38)) # probability of lose
hist(S) # distribution
sum(S) # total gains
mean(S) # mean gain
```

We use the sampling model to run a Monte Carlo simulation

```{r}
n <- 1000    # number of roulette players
B <- 10000    # number of Monte Carlo experiments
S <- replicate(B, {
    X <- sample(c(-1,1), n, replace = TRUE, prob = c(9/19, 10/19))    # simulate 1000 roulette spins
    sum(X)    # determine total profit
})

hist(S) # distribution of results
mean(S) # mean results
mean(S < 0)    # probability of the casino losing money
```


# Distributions versus Probability Distributions

- A random variable X has a probability distribution function F(a) that defines Pr(X<=a) over all values of a.

- Any list of numbers has a distribution. The probability distribution function of a random variable is defined mathematically and does not depend on a list of numbers.

- The results of a Monte Carlo simulation with a large enough number of observations will approximate the probability distribution of X.

- If a random variable is defined as draws from an urn:

The probability distribution function of the random variable is defined as the distribution of the list of values in the urn.

The expected value of the random variable is the average of values in the urn.

The standard error of one draw of the random variable is the standard deviation of the values of the urn.

- Capital letters denote random variables (X) and lowercase letters denote observed values (x).

- In the notation Pr(X=x), we are asking how frequently the random variable X is equal to the value x.

# Central Limit Theorem

- The Central Limit Theorem (CLT) says that the distribution of the sum of a random variable is approximated by a normal distribution.

- The expected value of a random variable, E[X] = u, is the average of the values in the urn. This represents the expectation of one draw.

- The standard error of one draw of a random variable is the standard deviation of the values in the urn.

- The expected value of the sum of draws is the number of draws times the expected value of the random variable.

- The standard error of the sum of independent draws of a random variable is the square root of the number of draws times the standard deviation of the urn.

- These equations apply to the case where there are only two outcomes, a and b with proportions p and 1-p respectively. The general principles above also apply to random variables with more than two outcomes.

Expected value of a random variable: E[X] = ap + b(1-p)
Expected value of the sum of n draws of a random variable: n*E[X]
Standard deviation of an urn with two values: sd(X) = |b-a|*sqrt(p(1-p))
Standard error of the sum of n draws of a random variable: sqrt(n) * sd(X)

# Exercises

1) An American roulette wheel has 18 red, 18 black, and 2 green pockets. Each red and black pocket is associated with a number from 1 to 36. The two remaining green slots feature "0" and "00". Players place bets on which pocket they think a ball will land in after the wheel is spun. Players can bet on a specific number (0, 00, 1-36) or color (red, black, or green). What are the chances that the ball lands in a green pocket?

```{r}
green <- 2
black <- 18
red <- 18
green/(black+red+green)
```

2) In American roulette, the payout for winning on green is \$17. This means that if you bet \$1 and it lands on green, you get \$17 as a prize. Create a model to predict your winnings from betting on green one time.

```{r}
set.seed(1)

# The variables 'green', 'black', and 'red' contain the number of pockets for each color
green <- 2
black <- 18
red <- 18

p_green <- green/(black+red+green)
p_not_green <- 1 - p_green

prob = sample(c(-1,17), 1, prob = c(p_not_green,p_green), replace = TRUE)
print(prob)
```

3) In American roulette, the payout for winning on green is \$17. This means that if you bet \$1 and it lands on green, you get \$17 as a prize. In the previous exercise, you created a model to predict your winnings from betting on green. Now, compute the expected value of X, the random variable you generated previously.

```{r}
# The variables 'green', 'black', and 'red' contain the number of pockets for each color
green <- 2
black <- 18
red <- 18

p_green <- green/(black+red+green)
p_not_green <- 1 - p_green

X = 17*p_green + -1*(p_not_green)
X
```

4) The standard error of a random variable tells us the difference between a random variable X and its expected value. You calculated a random variable X in exercise 2 and the expected value of that random variable in exercise 3. Now, compute the standard error of that random variable, which represents a single outcome after one spin of the roulette wheel.

```{r}
green <- 2
black <- 18
red <- 18

p_green <- green/(black+red+green)
p_not_green <- 1 - p_green

sdX <- abs(-1-17)*sqrt(p_green*p_not_green)
sdX
```

5) You modeled the outcome of a single spin of the roulette wheel,X, in exercise 2.
Now create a random variable S that sums your winnings after betting on green 1,000 times.

```{r}
set.seed(1)

# The variables 'green', 'black', and 'red' contain the number of pockets for each color
green <- 2
black <- 18
red <- 18

p_green <- green/(black+red+green)
p_not_green <- 1 - p_green

n <- 1000
X <- sample(c(-1,17),n,replace = TRUE, prob = c(p_not_green, p_green))
S <- sum(X)
S
```

6) In the previous exercise, you generated a vector of random outcomes,S, after betting on green 1,000 times. What is the expected value of S? What is the standard error?

```{r}
# The variables 'green', 'black', and 'red' contain the number of pockets for each color
green <- 2
black <- 18
red <- 18

p_green <- green/(black+red+green)
p_not_green <- 1 - p_green

X <- 17*p_green + -1*(p_not_green)
n <- 1000
n*X


sdX <- abs(-1-17)*sqrt(p_green*p_not_green)
sqrt(n)*sdX
```

# Averages and Proportions

- Random variable times a constant

The expected value of a random variable multiplied by a constant is that constant times its original expected value:

E[aX] = au

The standard error of a random variable multiplied by a constant is that constant times its original standard error:

SE[aX] = aSD



